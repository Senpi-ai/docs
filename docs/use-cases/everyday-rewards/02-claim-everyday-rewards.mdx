---
sidebar_class_name: clearing_price
description: Learn how to use the Moxie Everyday Rewards Claim API to claim the user's Moxie everyday rewards.
---

import Prerequisites from "../../../src/components/Tutorials/Prerequisites";
import DeveloperSupport from "../../../partial/_developer_support.mdx";
import Header from "../../../src/components/Tutorials/Header";
import AddMutation from "../../../src/components/Tutorials/AddMutation";
import ExecuteCode from "../../../src/components/Tutorials/ExecuteCode";
import Install from "../../../src/components/Install";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

# Claim Everyday Rewards

<Header
  useCase="claim the user's everyday rewards"
  apiName="Moxie Everyday Rewards Claim API"
/>

# Pre-requisites

1. Install dependencies `graphql`and`graphql-request` to your project :

<Install dependencies="graphql graphql-request" />

2. Your Airstack API key will need to be allow listed to have access to the Moxie Everyday Rewards Claim API. To request access, please fill in this form [here](https://forms.gle/th7hKumcxz3X5txZ6).

3. Have checked that the user has available rewards to claim and the available rewards to claim are greater than the minimum claim amount, currently set at 1 Moxie. You can check the user's available rewards to claim from this tutorial [here](01-check-users-everyday-rewards-amount.mdx). If no claim is available, this API will throw an error.

## Step 1: Add The API Mutation To Your Code

<AddMutation
  useCase="claim the user's everyday rewards"
  subgraphLink="https://claims.airstack.xyz/moxie"
  query={`mutation FarcasterUserClaimMoxie(
  $fid: Int!
  $preferredConnectedWallet: String!
) {
  FarcasterUserClaimMoxie(
    input: { fid: $fid, preferredConnectedWallet: $preferredConnectedWallet }
  ) {
    fid
    availableClaimAmount
    minimumClaimableAmountInWei
    availableClaimAmountInWei
    claimedAmount
    claimedAmountInWei
    processingAmount
    processingAmountInWei
    tokenAddress
    chainId
    transactionId
    transactionHash
    transactionStatus
    transactionAmount
    transactionAmountInWei
    rewardsLastEarnedTimestamp
  }
}`}
  headers={`{
  // Add Airstack API key here
  "x-airstack-claims": process.env.AIRSTACK_API_KEY as string,
}`}
  variable={`{
  fid: 3,
  preferredConnectedWallet: "<FARCASTER_VERIFIED_WALLET>"
}`}
  response={`{
  "FarcasterUserClaimMoxie": {
    "fid": "15971",
    "availableClaimAmount": 0,
    "minimumClaimableAmountInWei": "1000000000000000000",
    "availableClaimAmountInWei": "0",
    "claimedAmount": 0,
    "claimedAmountInWei": "0",
    "processingAmount": 1206.299242863659,
    "processingAmountInWei": "1206299242863658974356",
    "tokenAddress": "0x8C9037D1Ef5c6D1f6816278C7AAF5491d24CD527",
    "chainId": 8453,
    "transactionId": "0d9b17b2-07e2-41cb-8cf6-f8351ec7f669",
    "transactionHash": "0x30e12445cc1375f544f99486d36fd144038007488e36f83ed90a2b79950dd66e",
    "transactionStatus": "REQUESTED",
    "transactionAmount": 1206.299242863659,
    "transactionAmountInWei": "1206299242863658974356",
    "rewardsLastEarnedTimestamp": "2024-08-15T00:00:00.000Z"
  }
}`}
/>

## Step 2: Execute Your Code

Once you have your code ready, you can execute it by running the following command:

<Tabs>
  <TabItem value="ts" label="TypeScript">
    <CodeBlock language="sh">{"ts-node index.ts"}</CodeBlock>
  </TabItem>
  <TabItem value="js" label="JavaScript">
    <CodeBlock language="sh">{"node index.js"}</CodeBlock>
  </TabItem>
</Tabs>

If it runs successfully, you should see the data returned in the terminal:

```json
{
  "FarcasterUserClaimMoxie": {
    "fid": "15971",
    "availableClaimAmount": 0,
    "minimumClaimableAmountInWei": "1000000000000000000",
    "availableClaimAmountInWei": "0",
    "claimedAmount": 0,
    "claimedAmountInWei": "0",
    "processingAmount": 1206.299242863659,
    "processingAmountInWei": "1206299242863658974356",
    "tokenAddress": "0x8C9037D1Ef5c6D1f6816278C7AAF5491d24CD527",
    "chainId": 8453,
    "transactionId": "0d9b17b2-07e2-41cb-8cf6-f8351ec7f669",
    "transactionHash": "0x30e12445cc1375f544f99486d36fd144038007488e36f83ed90a2b79950dd66e",
    "transactionStatus": "REQUESTED",
    "transactionAmount": 1206.299242863659,
    "transactionAmountInWei": "1206299242863658974356",
    "rewardsLastEarnedTimestamp": "2024-08-15T00:00:00.000Z"
  }
}
```

Congrats! ðŸ¥³ðŸŽ‰ You've just successfully claimed the user's Moxie everyday rewards!

Next, you can take the `transactionId` field to check the claim transaction status in this tutorial [here](./03-check-claim-transaction-status.mdx).

<DeveloperSupport />
