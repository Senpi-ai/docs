---
sidebar_position: 1
sidebar_class_name: fan_token_schedule
description: Learn how to use the Airstack GraphQL API to get all the fan token auction schedules by their status.
---

import Prerequisites from "../../../src/components/Tutorials/Prerequisites";
import DeveloperSupport from "../../../partial/_developer_support.mdx";
import Header from "../../../src/components/Tutorials/Header";
import AddQuery from "../../../src/components/Tutorials/AddQuery";
import ExecuteCode from "../../../src/components/Tutorials/ExecuteCode";
import url from "../../../constant/api_url.json";

# Get Fan Token Auction Schedule By Status

<Header
  useCase="all the fan token auction schedules by their status"
  apiName="Airstack GraphQL"
/>

# Pre-requisites

<Prerequisites apiName="Airstack GraphQL" additionalDependencies="dotenv" />

In addition, to access the Airstack API, you should [get your Airstack API key](https://docs.airstack.xyz/airstack-docs-and-faqs/get-started/get-api-key).

For access to the Airstack API key, you'll need to **hold at least 1 /airstack Channel Fan Token** in either your Farcaster custodial wallet or one of your Farcaster verified wallets AND make sure that you have connected one of those wallet or your Farcaster account to your Airstack account.

If you don't have it yet, you can buy it [here](https://www.airstack.xyz/channels/airstack).

## Step 1: Add The API Query To Your Code

<AddQuery
  useCase="all the fan token auction schedules by their status"
  subgraphLink={url.offchain_graphql_api}
  query={`query MyQuery($status: FarcasterFanTokenAuctionStatusType) {
  FarcasterFanTokenAuctions(
    input: {filter: {status: {_eq: $status}, entityType: {_in: [USER, CHANNEL, CHANNEL]}}, blockchain: ALL, limit: 10}
  ) {
    FarcasterFanTokenAuction {
      auctionId
      auctionSupply
      decimals
      entityId
      entityName
      entitySymbol
      entityType
      estimatedEndTimestamp
      estimatedStartTimestamp
      launchCastUrl
      minBiddingAmount
      minFundingAmount
      minPriceInMoxie
      subjectAddress
    }
  }
}`}
  headers={`{
  // Add Airstack API key here
  Authorization: process.env.AIRSTACK_API_KEY as string,
}`}
  variable={`{
  // For example, to fetch all upcoming fan token auctions
  "status": "UPCOMING"
}`}
  response={`{
  "data": {
    "FarcasterFanTokenAuctions": {
      "FarcasterFanTokenAuction": [
        {
          "auctionId": null,
          "auctionSupply": 2.612e+21,
          "decimals": 18,
          "entityId": "screens",
          "entityName": "/screens",
          "entitySymbol": "cid:screens",
          "entityType": "CHANNEL",
          "estimatedEndTimestamp": "2024-08-07T14:00:00Z",
          "estimatedStartTimestamp": "2024-08-04T14:00:00Z",
          "launchCastUrl": "",
          "minBiddingAmount": 10000000000000000,
          "minFundingAmount": 0,
          "minPriceInMoxie": 1000000000000000000,
          "subjectAddress": "0xFeddb7c19D458833e082F4c7A8037DFa57F0929E"
        }
      ]
    }
  }
}`}
/>

## Step 2: Execute Your Code

<ExecuteCode
  response={`{
  "data": {
    "FarcasterFanTokenAuctions": {
      "FarcasterFanTokenAuction": [
        {
          "auctionId": null,
          "auctionSupply": 2.612e+21,
          "decimals": 18,
          "entityId": "screens",
          "entityName": "/screens",
          "entitySymbol": "cid:screens",
          "entityType": "CHANNEL",
          "estimatedEndTimestamp": "2024-08-07T14:00:00Z",
          "estimatedStartTimestamp": "2024-08-04T14:00:00Z",
          "launchCastUrl": "",
          "minBiddingAmount": 10000000000000000,
          "minFundingAmount": 0,
          "minPriceInMoxie": 1000000000000000000,
          "subjectAddress": "0xFeddb7c19D458833e082F4c7A8037DFa57F0929E"
        }
      ]
    }
  }
}`}
  dataFetched="all the fan token auction schedules by their status"
/>

<DeveloperSupport />
