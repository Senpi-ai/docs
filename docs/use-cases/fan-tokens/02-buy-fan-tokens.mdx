---
sidebar_class_name: hidden
description: Learn how to make calls to the the Moxie Bonding Curve smart contract to buy fan tokens, either from your wallet or your vesting contract.
---

import DeveloperSupport from "../../../partial/_developer_support.mdx";

# Buy Fan Tokens

## Pre-requisites

1. Install dependencies

2. Download the [Moxie Token](https://github.com/moxie-protocol/contracts/blob/dev/packages/protocol/ignition/deployments/base-mainnet/artifacts/MoxieToken%23MoxieToken.json) and [Moxie Bonding Curve ABI](https://github.com/moxie-protocol/contracts/blob/dev/packages/protocol/ignition/deployments/base-mainnet/artifacts/ProtocolContracts%23MoxieBondingCurve.json).

3. Make sure to have [Moxie token](https://basescan.org/address/0x8C9037D1Ef5c6D1f6816278C7AAF5491d24CD527) in your wallet and sufficient Base ETH to cover the transaction fees.

## Step 1: Setup Client

```ts title="config.ts"
import { createWalletClient, createPublicClient, http } from "viem";
import { mnemonicToAccount } from "viem/accounts";
import { base } from "viem/chains";

const account = mnemonicToAccount("YOUR_WALLET_MNEMONIC");

const client = createWalletClient({
  account,
  chain: base,
  transport: http(),
});

export const publicClient = createPublicClient({
  chain: base,
  transport: http(),
});
```

## Step 2: Check Moxie Token Allowance

## Step 3: Calculate Buy Price For Fan Tokens

## Step 4: Approve Moxie Tokens

## Step 5: Execute Contract Call

```ts
import client from "./client";
import { MoxieBondingCurveABI } from "./abi/ProtocolContracts#MoxieBondingCurve.json";

try {
  client.writeContract({
    account,
    address: "0x373065e66B32a1C428aa14698dFa99BA7199B55E",
    abi: MoxieBondingCurveABI,
    functionName: "buyShares",
    args: [
      // subject address
      "0x338fDD513Ed2eC7ee1249Ee286F967FC56492C78",
      // amount of Moxie to purchase the FT, calculated from step 2
      BigInt("263749847732490543"),
      // (minimum) amount of FT to buy
      BigInt("10000000000000000"),
    ],
  });
} catch (e) {
  console.error(e);
}
```

<DeveloperSupport />
