---
sidebar_class_name: arrow_circle_up
description: Learn how to use the Moxie Protocol Subgraph API to get the user's sell orders.
---

import Prerequisites from "../../../src/components/Tutorials/Prerequisites";
import DeveloperSupport from "../../../partial/_developer_support.mdx";
import Header from "../../../src/components/Tutorials/Header";
import AddQuery from "../../../src/components/Tutorials/AddQuery";
import ExecuteCode from "../../../src/components/Tutorials/ExecuteCode";
import url from "../../../constant/api_url.json";

# Get User's Sell Orders

<Header
  useCase="get the user's sell orders"
  apiName="Moxie Protocol Subgraph"
/>

:::info[Include User's Vesting Addresses]

Moxie protocol users have Moxie token currently vesting in their vesting contract. A huge portion of them use these to bid on auctions and buy/sell Creator Coins on the Moxie protocol.

Therefore, it is important that you include the user's vesting addresses in the query to get all user's sell orders on the Moxie bonding curve. To **get user's vesting contract addresses**, click [**here**](../vesting/01-get-users-vesting-contract-addresses.mdx).

:::

# Pre-requisites

<Prerequisites apiName="Moxie Protocol Subgraph" />

## Step 1: Add The API Query To Your Code

<AddQuery
  useCase="get the user's sell orders"
  subgraphLink={url.protocol_stats_subgraphs}
  query={`query MyQuery($userAddresses: [ID!]) {
  users(where: {id_in: $userAddresses}) {
    orders(where: {orderType: SELL}) {
      price
      protocolToken
      protocolTokenAmount
      protocolFeeTransfer {
        txHash
        amount
      }
      subjectToken {
        name
        symbol
      }
      subjectAmount
      subjectFeeTransfer {
        txHash
        amount
      }
    }
  }
}`}
  variable={`{
  "userAddresses": [
    "0x3bd3e709e946b0882cd6393dde0fb200ce7119ce"
  ]
}`}
  response={`{
  "data": {
    "users": [
      {
        "orders": [
          {
            "price": "0.006968543664227871909162462934855122",
            "protocolToken": "0xf86136afb0fb72cdbd27d7aea9e283725d6815a1",
            "protocolTokenAmount": "143502006758366481515",
            "protocolFeeTransfer": {
              "txHash": "0xad4766fdfcce942ab44b9f6bd8a7bfe9ba6e4d5e27a50f4113e3cce024f75c02",
              "amount": "20000000000000000"
            },
            "subjectToken": {
              "name": "aalitkn",
              "symbol": "fid:340066"
            },
            "subjectAmount": "1000000000000000000",
            "subjectFeeTransfer": {
              "txHash": "0xad4766fdfcce942ab44b9f6bd8a7bfe9ba6e4d5e27a50f4113e3cce024f75c02",
              "amount": "40000000000000000"
            }
          }
        ]
      }
    ]
  }
}`}
/>

## Step 2: Execute Your Code

<ExecuteCode
  response={`{
  "data": {
    "users": [
      {
        "orders": [
          {
            "price": "0.006968543664227871909162462934855122",
            "protocolToken": "0xf86136afb0fb72cdbd27d7aea9e283725d6815a1",
            "protocolTokenAmount": "143502006758366481515",
            "protocolFeeTransfer": {
              "txHash": "0xad4766fdfcce942ab44b9f6bd8a7bfe9ba6e4d5e27a50f4113e3cce024f75c02",
              "amount": "20000000000000000"
            },
            "subjectToken": {
              "name": "aalitkn",
              "symbol": "fid:340066"
            },
            "subjectAmount": "1000000000000000000",
            "subjectFeeTransfer": {
              "txHash": "0xad4766fdfcce942ab44b9f6bd8a7bfe9ba6e4d5e27a50f4113e3cce024f75c02",
              "amount": "40000000000000000"
            }
          }
        ]
      }
    ]
  }
}`}
  dataFetched="all the user's sell orders"
/>

<DeveloperSupport />
